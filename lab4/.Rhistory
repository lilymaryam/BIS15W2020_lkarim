ASFIS_sciname = `ASFIS species name`,
ISSCAAP_spgroupname = `ISSCAAP taxonomic group`,
FAO_area = `FAO major fishing area`,
unit = Measure0
)
fisheries %>%
dplyr::rename(country = Country,
commname = `Common name`,
ISSCAAP_spgroup = `ISSCAAP group#`,
ASFIS_spcode =`ASFIS species#`,
ASFIS_sciname = `ASFIS species name`,
ISSCAAP_spgroupname = `ISSCAAP taxonomic group`,
FAO_area = `FAO major fishing area`,
unit = Measure)
)
fisheries %>%
dplyr::rename(country = Country,
commname = `Common name`,
ISSCAAP_spgroup = `ISSCAAP group#`,
ASFIS_spcode =`ASFIS species#`,
ASFIS_sciname = `ASFIS species name`,
ISSCAAP_spgroupname = `ISSCAAP taxonomic group`,
FAO_area = `FAO major fishing area`,
unit = Measure)
fisheries_tidy <-
fisheries %>%
pivot_longer(`1950`:`2012`,
names_to = "year",
values_to = "amnt_fish")
fisheries_tidy <-
fisheries %>%
pivot_longer(`1950`:`2012`,
names_to = "year",
values_to = "amnt_fish")
fisheries_tidy <-
fisheries %>%
pivot_longer(`1950`:`2012`,
names_to = "year",
values_to = "amnt_fish")
expenditures %>%
pivot_longer(`1940`:`1955`,
names_to = "year",
values_to = "cost")
fisheries_tidy <-
fisheries %>%
pivot_longer(`1950`:`2012`,
names_to = "year",
values_to = "amnt_fish")
fisheries_tidy <-
fisheries %>%
pivot_longer(9:71,
names_to = "year",
values_to = "amnt_fish")
fisheries_tidy <-
fisheries %>%
pivot_longer(`1950`:`2012`,
names_to = "year",
values_to = "amnt_fish")
fisheries_tidy
fisheries_tidy <-
fisheries %>%
pivot_longer(`1950`:`2012`,
names_to = "year",
values_to = "catch")
fisheries_tidy
fisheries_tidy %>%
select(country, ISSCAAP_spgroupname, ASFIS_spcode, ASFIS_sciname, year, and catch)
fisheries_tidy %>%
select(country, ISSCAAP_spgroupname, ASFIS_spcode, ASFIS_sciname, year, catch)
fisheries_tidy %>%
select(country, ISSCAAP_spgroupname, ASFIS_spcode, ASFIS_sciname, year, catch)
fisheries <-
fisheries %>%
dplyr::rename(country = Country,
commname = `Common name`,
ISSCAAP_spgroup = `ISSCAAP group#`,
ASFIS_spcode =`ASFIS species#`,
ASFIS_sciname = `ASFIS species name`,
ISSCAAP_spgroupname = `ISSCAAP taxonomic group`,
FAO_area = `FAO major fishing area`,
unit = Measure)
fisheries
fisheries_tidy <-
fisheries %>%
pivot_longer(`1950`:`2012`,
names_to = "year",
values_to = "catch")
fisheries_tidy
fisheries_tidy %>%
select(country, ISSCAAP_spgroupname, ASFIS_spcode, ASFIS_sciname, year, catch)
fisheries_tidy2 <-
fisheries_tidy %>%
select(country, ISSCAAP_spgroupname, ASFIS_spcode, ASFIS_sciname, year, catch)
str(fisheries_tidy2)
str(fisheries_tidy2)
catch(is.numeric
str(fisheries_tidy2)
catch(is.numeric)
str(fisheries_tidy2)
is.numeric(catch)
str(fisheries_tidy2)
fisheries_tidy2 %>%
is.numeric(catch)
str(fisheries_tidy2)
fisheries_tidy2 %>%
select(catch) %>%
class(catch)
str(fisheries_tidy2)
fisheries_tidy2 %>%
select(catch) %>%
class(fisheries_tidy2$catch)
str(fisheries_tidy2)
catch1 <- fisheries_tidy2$catch
class(catch1)
nlevels(fisheries_tidy2$ASFIS_spcode)
fisheries_tidy2 %>%
select(country, catch, year) %>%
filter(y9ear = 2000) %>%
arrange(desc(year))
fisheries_tidy2 %>%
select(country, catch, year) %>%
filter(year = 2000) %>%
arrange(desc(year))
fisheries_tidy2 %>%
select(country, catch, year) %>%
filter(year == 2000) %>%
arrange(desc(year))
fisheries_tidy2 %>%
select(country, catch, year) %>%
filter(year == 2000) %>%
group_by(country)
arrange(desc(year))
fisheries_tidy2 %>%
select(country, catch, year) %>%
filter(year == 2000) %>%
group_by(country) %>%
sum(catch, na.rm = TRUE)
levels(fisheries$Country)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
colnames(fisheries)
str(fisheries)
fisheries <- fisheries %>%
mutate_at(vars(9:71), as.numeric, na.rm = TRUE) %>%
mutate_if(is.character, as.factor)
sapply(fisheries, class)
nlevels(fisheries$Country)
fisheries <- readr::read_csv("data/FAO_1950to2012_111914.csv")
colnames(fisheries)
str(fisheries)
fisheries <- fisheries %>%
mutate_at(vars(9:71), as.numeric, na.rm = TRUE) %>%
mutate_if(is.character, as.factor)
sapply(fisheries, class)
nlevels(fisheries$Country)
levels(fisheries$Country)
fisheries <-
fisheries %>%
dplyr::rename(country = Country,
commname = `Common name`,
ISSCAAP_spgroup = `ISSCAAP group#`,
ASFIS_spcode =`ASFIS species#`,
ASFIS_sciname = `ASFIS species name`,
ISSCAAP_spgroupname = `ISSCAAP taxonomic group`,
FAO_area = `FAO major fishing area`,
unit = Measure)
fisheries
fisheries_tidy <-
fisheries %>%
pivot_longer(`1950`:`2012`,
names_to = "year",
values_to = "catch")
fisheries_tidy
fisheries_tidy2 <-
fisheries_tidy %>%
select(country, ISSCAAP_spgroupname, ASFIS_spcode, ASFIS_sciname, year, catch)
fisheries_tidy2 <-
fisheries_tidy %>%
select(country, ISSCAAP_spgroupname, ASFIS_spcode, ASFIS_sciname, year, catch)
fisheries_tidy2
str(fisheries_tidy2)
catch1 <- fisheries_tidy2$catch
class(catch1)
fisheries_tidy2 %>%
select(country, catch, year) %>%
filter(year == 2000) %>%
group_by(country) %>%
sum(catch, na.rm = TRUE)
fisheries_tidy2 %>%
filter(year == 2000) %>%
group_by(country) %>%
sum(catch, na.rm = TRUE)
fisheries_tidy2 %>%
filter(year == 2000) %>%
group_by(country) %>%
summarise(catch = sum(catch, na.rm = TRUE))
fisheries_tidy2 %>%
filter(year == 2000) %>%
group_by(country) %>%
summarise(catch = sum(catch, na.rm = TRUE)) %>%
arrange(desc(catch))
fisheries_tidy2$china
fisheries_tidy2$China
fisheries_tidy2$country
fisheries_tidy2$country %>%
select(country == "China")
fisheries_tidy2 %>%
group_by(country) %>%
filter(year == 2000) %>%
summarise(catch = sum(catch, na.rm = TRUE)) %>%
arrange(desc(catch))
fisheries_tidy2 %>%
group_by(country) %>%
filter(year == c(1990,1991,1992.1993.1994,1995,1996,1997,1998,1999,2000))
fisheries_tidy2 %>%
group_by(country) %>%
filter(year >= 1990 & year <= 2000)
fisheries_tidy2 %>%
group_by(country) %>%
filter(year >= 1990 & year <= 2000) %>%
filter(ASFIS_sciname == "Sardina")
summarise()
fisheries_tidy2 %>%
group_by(country) %>%
filter(year >= 1990 & year <= 2000) %>%
filter(ASFIS_sciname == "Sardina")
fisheries_tidy2 %>%
group_by(country) %>%
filter(year >= 1990 & year <= 2000) %>%
filter(ASFIS_sciname contains("Sardina"))
fisheries_tidy2 %>%
group_by(country) %>%
filter(year >= 1990 & year <= 2000) %>%
filter(ASFIS_sciname, contains("Sardina"))
fisheries <- fisheries %>%
mutate_at(vars(9:71), as.numeric, na.rm = TRUE) %>%
mutate_if(is.character, as.factor)
sapply(fisheries, class)
fisheries_tidy2 %>%
group_by(country) %>%
filter(year >= 1990 & year <= 2000) %>%
select(country, contains("Sardina"), catch)
fisheries_tidy2 %>%
group_by(country) %>%
filter(year >= 1990 & year <= 2000) %>%
select(country, contains("Sardina"), catch, ASFIS_sciname)
fisheries_tidy2 %>%
group_by(country) %>%
filter(year >= 1990 & year <= 2000) %>%
select(country, contains("Sardina"), catch, ASFIS_sciname contains("Sardina"))
fisheries_tidy2 %>%
filter(contains("Sardina")) %>%
filter(year >= 1990 & year <= 2000) %>%
group_by(country)
fisheries_tidy2 %>%
filter(!grepl('Sardina')
filter(year >= 1990 & year <= 2000) %>%
fisheries_tidy2 %>%
filter(!grepl('Sardina') %>%
filter(year >= 1990 & year <= 2000) %>%
group_by(country)
fisheries_tidy2 %>%
filter(!grepl('Sardina')) %>%
filter(year >= 1990 & year <= 2000) %>%
group_by(country)
fisheries_tidy2 %>%
filter(!grepl("Sardina", ASFIS_sciname)) %>%
filter(year >= 1990 & year <= 2000) %>%
group_by(country)
fisheries_tidy2 %>%
filter(!grepl("Sardina", ASFIS_sciname)) %>%
filter(year >= 1990 & year <= 2000) %>%
group_by(country) %>%
arrange(ASFIS_sciname)
fisheries_tidy2 %>%
select(country, catch, year, ASFIS_sciname)
filter(!grepl("Sardina", ASFIS_sciname)) %>%
filter(year >= 1990 & year <= 2000) %>%
group_by(country) %>%
arrange(ASFIS_sciname)
fisheries_tidy2 %>%
select(country, catch, year, ASFIS_sciname) %>%
filter(!grepl("Sardina", ASFIS_sciname)) %>%
filter(year >= 1990 & year <= 2000) %>%
group_by(country) %>%
arrange(ASFIS_sciname)
fisheries_tidy2 %>%
filter(str_detect(ASFIS_sciname, "Sardina")) %>%
filter(year >= 1990 & year <= 2000) %>%
group_by(country) %>%
arrange(ASFIS_sciname)
fisheries_tidy2 %>%
filter(str_detect(ASFIS_sciname, "Sardina")) %>%
filter(year >= 1990 & year <= 2000) %>%
group_by(country) %>%
summarize(catch = sum(catch), na.rm = T)
fisheries_tidy2 %>%
filter(str_detect(ASFIS_sciname, "Sardina")) %>%
filter(year >= 1990 & year <= 2000) %>%
group_by(country) %>%
summarize(catch = sum(catch), na.rm = T) %>%
arrange(desc(catch))
fisheries_tidy2 %>%
filter(ASFIS_sciname=="Sepia officinalis") %>%
filter(year <=2012 &year >=2008) %>%
summarise(cephalopods = sum(catch), na.rm = T) %>%
arrange(desc(catch))
fisheries_tidy2 %>%
filter(ASFIS_sciname=="Sepia officinalis") %>%
filter(year <=2012 &year >=2008) %>%
summarise(cephalopods = sum(catch), na.rm = T) %>%
arrange(desc(cephalopods))
fisheries_tidy2 %>%
filter(ASFIS_sciname=="Sepia officinalis") %>%
filter(year <=2012 &year >=2008) %>%
summarise(catch = sum(catch), na.rm = T) %>%
arrange(desc(cephalopods))
fisheries_tidy2 %>%
filter(ASFIS_sciname=="Sepia officinalis") %>%
filter(year <=2012 &year >=2008) %>%
summarise(catch = sum(catch), na.rm = T) %>%
arrange(desc(catch))
fisheries_tidy2 %>%
filter(ASFIS_sciname=="Sepia officinalis") %>%
filter(year <=2012 &year >=2008) %>%
group_by(country) %>%
summarise(catch = sum(catch), na.rm = T) %>%
arrange(desc(catch))
fisheries_tidy2 %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year <=2012 &year >=2008) %>%
group_by(country) %>%
summarise(catch = sum(catch), na.rm = T) %>%
arrange(desc(catch))
fisheries_tidy2 %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year <=2012 &year >=2008) %>%
group_by(country) %>%
summarise(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch))
fisheries_tidy2 %>%
filter(str_detect(ASFIS_sciname, "Sardina")) %>%
filter(year >= 1990 & year <= 2000) %>%
group_by(country) %>%
summarize(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch))
fisheries_tidy2 %>%
group_by(country) %>%
filter(year == 2000) %>%
summarise(catch = sum(catch, na.rm = TRUE)) %>%
arrange(desc(catch))
fisheries_tidy2 %>%
filter(year == "2000") %>%
group_by(country) %>%
summarize(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
cephalopod_stats <-
fisheries_tidy2 %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year <=2012 &year >=2008) %>%
group_by(country) %>%
summarise(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch))
cephalopod_stats <-
fisheries_tidy2 %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year <=2012 &year >=2008) %>%
group_by(country) %>%
summarise(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch))
cephalopod_stats
fisheries_tidy2 %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year <=2012 &year >=2008) %>%
group_by(country) %>%
summarise(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch))
coastal_fish <-
fisheries_tidy2 %>%
filter(ISSCAAP_spgroupname == "Miscellaneous coastal fishes")
coastal_fish <-
fisheries_tidy2 %>%
filter(ISSCAAP_spgroupname == "Miscellaneous coastal fishes")
coastal_fish <-
fisheries_tidy2 %>%
filter(ISSCAAP_spgroupname == "Miscellaneous coastal fishes")
coastal_fish
coastal_fish <-
fisheries_tidy2 %>%
filter(ISSCAAP_spgroupname == "Miscellaneous coastal fishes") %>%
as.data.frame() %>%
# mutate()
coastal_fish <-
fisheries_tidy2 %>%
filter(ISSCAAP_spgroupname == "Miscellaneous coastal fishes") %>%
as.data.frame()
coastal_fish <-
fisheries_tidy2 %>%
filter(ISSCAAP_spgroupname == "Miscellaneous coastal fishes") %>%
as.data.frame()
coastal_fish
cephalopod_stats <-
fisheries_tidy2 %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year <=2012 &year >=2008) %>%
group_by(country) %>%
summarise(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch)) %>%
cephalopod_stats[, head(.SD, 5), by=catch]
cephalopod_stats <-
fisheries_tidy2 %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year <=2012 &year >=2008) %>%
group_by(country) %>%
summarise(catch = sum(catch, na.rm = T)) %>%
cephalopod_stats[, head(.SD, 5), by=catch]
cephalopod_stats <-
fisheries_tidy2 %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year <=2012 &year >=2008) %>%
group_by(country)
cephalopod_stats <-
fisheries_tidy2 %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year <=2012 &year >=2008) %>%
group_by(country)
cephalopod_stats
cephalopod_stats <-
fisheries_tidy2 %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year <=2012 &year >=2008) %>%
group_by(country) %>%
summarise(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch))
cephalopod_stats
cephalopod_stats <-
fisheries_tidy2 %>%
filter(country == c("China", "Peru", "Korea", "Japan", "Chile")
# filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
# filter(year <=2012 &year >=2008) %>%
# group_by(country) %>%
# summarise(catch = sum(catch, na.rm = T)) %>%
# arrange(desc(catch)) %>%
cephalopod_stats
cephalopod_stats <-
fisheries_tidy2 %>%
filter(country == c("China", "Peru", "Korea", "Japan", "Chile"))
# filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
# filter(year <=2012 &year >=2008) %>%
# group_by(country) %>%
# summarise(catch = sum(catch, na.rm = T)) %>%
# arrange(desc(catch)) %>%
cephalopod_stats
cephalopod_stats <-
fisheries_tidy2 %>%
filter(country == c("China", "Peru", "Korea", "Japan", "Chile")) %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year <=2012 &year >=2008) %>%
group_by(ASFIS_sciname) %>%
summarise(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch)) %>%
cephalopod_stats
cephalopod_stats <-
fisheries_tidy2 %>%
filter(country == c("China", "Peru", "Korea", "Japan", "Chile")) %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year <=2012 &year >=2008) %>%
group_by(ASFIS_sciname) %>%
summarise(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch)) %>%
cephalopod_stats
cephalopod_stats <-
fisheries_tidy2 %>%
filter(country == c("China", "Peru", "Korea", "Japan", "Chile")) %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year <=2012 &year >=2008) %>%
group_by(ASFIS_sciname) %>%
summarise(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch))
cephalopod_stats
fisheries_tidy %>%
filter(str_detect(commname, "octopus")
fisheries_tidy %>%
filter(str_detect(commname, "octopus"))
fisheries_tidy2 %>%
filter(ISSCAAP_spgroup==57)
fisheries_tidy2 %>%
filter(ISSCAAP_spgroup == 57)
fisheries_tidy %>%
filter(ISSCAAP_spgroup == 57)
fisheries_tidy %>%
filter(ISSCAAP_spgroup == 57) %>%
filter(year == 1963)
fisheries_tidy %>%
filter(str_detect(commname, "octopus")) %>%
filter(year == 1963)
fisheries_tidy %>%
filter(str_detect(commname, "octopus")) %>%
filter(year == 1963) %>%
group_by(country) %>%
summarise(catch = sum(catch, na.rm = T))
fisheries_tidy %>%
filter(str_detect(commname, "octopus")) %>%
filter(year == 1963) %>%
group_by(country) %>%
summarise(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch))
fisheries_tidy2 %>%
group_by(country) %>%
filter(year == 2000) %>%
summarise(catch = sum(catch, na.rm = TRUE)) %>%
arrange(desc(catch))
